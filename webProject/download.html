<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(-45deg, #1e3a8a, #9333ea, #f59e0b, #ef4444);
      background-size: 400% 400%;
      animation: gradientBG 12s ease infinite;
    }
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .fade-in { animation: fadeIn 1.2s ease forwards; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="font-sans text-white">

  <!-- Navigation -->
  <nav class="bg-black bg-opacity-60 text-white px-6 py-4 flex items-center justify-between shadow-lg">
    <div class="text-2xl font-bold text-yellow-400">ðŸŽ¬ Cinema Booking</div>
    <a href="booking.html" class="hover:text-yellow-400 transition">Back to Seats</a>
  </nav>

  <!-- Transformation Diagram -->
  <div class="flex justify-center mt-6 space-x-6 text-gray-200 font-semibold fade-in">
    <div class="flex flex-col items-center">
      <div class="w-10 h-10 rounded-full bg-yellow-400 flex items-center justify-center">1</div>
      <p class="mt-2">Seats</p>
    </div>
    <div class="flex flex-col items-center">
      <div class="w-10 h-10 rounded-full bg-green-400 flex items-center justify-center">2</div>
      <p class="mt-2">Payment</p>
    </div>
    <div class="flex flex-col items-center">
      <div class="w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center">3</div>
      <p class="mt-2">Success</p>
    </div>
  </div>

  <!-- Payment Section -->
  <section id="paymentSection"
    class="p-8 max-w-3xl mx-auto bg-white bg-opacity-90 rounded shadow mt-6 fade-in text-gray-800">
    <h2 class="text-2xl font-bold mb-6">Payment</h2>
    <div class="mb-6 space-y-2">
      <p><span class="font-semibold">Movie:</span> <span id="movieName"></span></p>
      <p><span class="font-semibold">Seat(s):</span> <span id="seatNumbers"></span></p>
      <p><span class="font-semibold">Amount:</span> <span id="amountValue"></span></p>
    </div>
    <button id="payBtn"
      class="block text-center bg-green-500 text-white px-6 py-3 rounded font-semibold w-full transform transition duration-300 hover:scale-105 hover:bg-green-600 shadow-lg">
    </button>
  </section>

  <!-- Success Section -->
  <section id="successSection"
    class="hidden p-8 max-w-3xl mx-auto bg-white bg-opacity-90 rounded shadow mt-6 fade-in text-gray-800 text-center">
    <h2 class="text-2xl font-bold mb-6 text-green-600">âœ… Payment Successful!</h2>
    <p class="mb-4">Your booking is confirmed.</p>
    <p><span class="font-semibold">Movie:</span> <span id="successMovie"></span></p>
    <p><span class="font-semibold">Seat(s):</span> <span id="successSeats"></span></p>
    <p><span class="font-semibold">Amount:</span> <span id="successAmount"></span></p>
  </section>

  <script>
    // Retrieve data from localStorage
    const selectedMovie = localStorage.getItem("selectedMovie") || "Unknown";
    const selectedSeats = JSON.parse(localStorage.getItem("selectedSeats")) || [];
    const seatPrice = parseInt(localStorage.getItem("seatPrice")) || 250;
    const selectedAmount = selectedSeats.length * seatPrice;

    // Populate values
    document.getElementById("movieName").textContent = selectedMovie;
    document.getElementById("seatNumbers").textContent = selectedSeats.join(", ");
    document.getElementById("amountValue").textContent = `â‚¹${selectedAmount}`;
    document.getElementById("payBtn").textContent = `Pay Now â‚¹${selectedAmount}`;

    // Payment simulation
    document.getElementById("payBtn").addEventListener("click", () => {
      document.getElementById("payBtn").innerText = "Processing...";
      setTimeout(() => {
        // Hide payment section, show success section
        document.getElementById("paymentSection").classList.add("hidden");
        document.getElementById("successSection").classList.remove("hidden");

        // Fill success details
        document.getElementById("successMovie").textContent = selectedMovie;
        document.getElementById("successSeats").textContent = selectedSeats.join(", ");
        document.getElementById("successAmount").textContent = `â‚¹${selectedAmount}`;

        // Generate receipt
        const receiptText = `
ðŸŽ¬ Cinema Booking Receipt
Movie: ${selectedMovie}
Seats: ${selectedSeats.join(", ")}
Amount Paid: â‚¹${selectedAmount}
Status: Payment Successful âœ…
        `;
        const blob = new Blob([receiptText], { type: "text/plain" });
        const url = URL.createObjectURL(blob);

        // Add download button dynamically
        const downloadBtn = document.createElement("a");
        downloadBtn.href = url;
        downloadBtn.download = "receipt.txt";
        downloadBtn.textContent = "Download Receipt";
        downloadBtn.className = "mt-6 inline-block bg-purple-500 text-white px-6 py-3 rounded font-semibold hover:bg-purple-600 shadow-lg";
        document.getElementById("successSection").appendChild(downloadBtn);
      }, 2000);
    });
  </script>
</body>
</html>